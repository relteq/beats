function []=plot_text(configfile,outprefix)

path = fullfile(fileparts(fileparts(mfilename('fullpath'))),'loadOutput');
addpath(path);
X = readSiriusOutput_txt(configfile,outprefix);
rmpath(path);

% aggregate vehicle types
density = reshape(sum(X.density,2),X.numDN,X.numTime,X.numLinks);
flow = reshape(sum(X.flow,2),X.numDN,X.numTime-1,X.numLinks);

<<<<<<< HEAD
% aggregate desination networks
density = reshape(sum(density,1),X.numTime,X.numLinks);
flow = reshape(sum(flow,1),X.numTime-1,X.numLinks);
=======
if(length(length(scenario.NetworkList.network))~=1)
    error('plot_text does not work for scenarios with multiple networks')
end

dt = round(2*scenario.NetworkList.network(1).ATTRIBUTE.dt)/2;

%  temp
outdt = dt/3600;
clear dt

% density in veh/mile
density = load(sprintf(fnformat, 'density'));
for i=1:length(scenario.NetworkList.network(1).LinkList.link)
    lgth = scenario.NetworkList.network(1).LinkList.link(i).ATTRIBUTE.length;
    density(:,i) = density(:,i)/lgth;
end

% flow in veh/hr
flow = load(sprintf(fnformat, 'outflow'));
flow = flow/outdt;

% speed in mile/hr
speed = flow./density(1:(end - 1),:);

figure
plot(speed)
title('Speed in [length]/hr')

figure
plot(flow)
title('Flow in veh/hr')

figure
plot(density)
title('Density in veh/[length]')


figure
set(pcolor(speed), 'EdgeAlpha', 0);
colorbar;
title('Speed in [length]/hr')
>>>>>>> 471f7102407115e50a036dd415cd0ab5ba41deaa

figure
plot(X.time(1:end-1)/3600,flow)
ylabel('Flow in veh/hr')
xlabel('time [hr]')

figure
plot(X.time/3600,density)
ylabel('Density in veh/mile')
xlabel('time [hr]')

% figure
% set(pcolor(simdata.speed), 'EdgeAlpha', 0);
% colorbar;
% title('Speed in [length]/hr')
% 
% figure
% set(pcolor(flow), 'EdgeAlpha', 0);
% colorbar;
% title('Flow in veh/hr')
% 
% figure
% set(pcolor(density), 'EdgeAlpha', 0);
% colorbar;
% title('Density in veh/[length]')

